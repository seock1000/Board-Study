### 좋아요 설계
- 대규모 시스템에서 count 쿼리는 비용이 많이 든다.
- 좋아요 수를 실시간으로 보여줘야 하는 경우, 매번 count 쿼리를 날리면 성능에 큰 영향을 미친다.
- 따라서, 좋아요 테이블의 게시글별 데이터 개수를 비정규화 하여 별도의 테이블에 저장해두고 생성/삭제시 이를 갱신하는 방식으로 설계한다.

- 좋아요 데이터의 특징
  - 쓰기 트래픽이 크지 않음
  - 데이터의 일관성 중요
  - DB 트랜잭션 활용 -> 생성/삭제와 좋아요 개수 갱신을 같은 트랜잭션에서 처리
- 좋아요 개수 관리 방법
  - 게시글 테이블의 컬럼으로 설정
    - 발생 문제, RecordLock : 레코드에 락이 걸려 다른 트랜잭션(좋아요/게시글)이 대기하게 된다. 이로 인해 성능 저하 및 데드락 발생 가능성이 있다.
      - 게시글과 좋아요의 life cycle이 다 -> 서로 다른 주체에 의해 레코드의 락 발생 가능
  - 좋아요 수를 독립적인 테이블로 분리
    - 좋아요 데이터와 좋아요 개수의 일관성이 중요
    - 분산 환경을 지향하는 시스템에서 좋아요 수는 좋아요 서비스의 관심사로 보는 것이 자연스러움
    - 좋아요 서비스의 단일 DB에서 하나의 트랜잭션으로 처리